<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="python 学习笔记，之前有两篇笔记，因为太多了，所以新开一篇。">
<meta property="og:type" content="article">
<meta property="og:title" content="Python 学习笔记3">
<meta property="og:url" content="http://yoursite.com/2019/11/04/python-learning3/index.html">
<meta property="og:site_name" content="Jijeng&#39;s blog">
<meta property="og:description" content="python 学习笔记，之前有两篇笔记，因为太多了，所以新开一篇。">
<meta property="article:published_time" content="2019-11-04T11:16:02.000Z">
<meta property="article:modified_time" content="2020-07-31T05:52:22.250Z">
<meta property="article:author" content="Jijeng Jia">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/11/04/python-learning3/"/>







<script>
	(function(){
		if(''){
			if (prompt('请输入文章密码','') !== ''){
				alert('密码错误！');
				history.back();
			}
		}
	})();
</script>

  <title>Python 学习笔记3 | Jijeng's blog</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jijeng's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/11/04/python-learning3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jijeng Jia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jijeng's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Python 学习笔记3</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-11-04T19:16:02+08:00">
                2019-11-04
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-07-31T13:52:22+08:00">
                2020-07-31
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CS%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">CS基础</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/11/04/python-learning3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/11/04/python-learning3/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>python 学习笔记，之前有两篇笔记，因为太多了，所以新开一篇。</p>
<a id="more"></a>


<p>python 中常见的判别函数</p>
<ol>
<li><code>isinstance()</code></li>
</ol>
<p>判断一个item 是否是list or tuple</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myextend</span><span class="params">(alist)</span>:</span></span><br><span class="line">    blist = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> alist:</span><br><span class="line">        <span class="keyword">if</span> isinstance(item, (list, tuple)):</span><br><span class="line">            blist.extend(myextend(item))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            blist.append(item)</span><br><span class="line">    <span class="keyword">return</span> blist</span><br></pre></td></tr></table></figure>

<p>基本类型对于 <code>classinfo</code> 可以是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int，float，bool，complex，str(字符串)，list，dict(字典)，set，tuple</span><br></pre></td></tr></table></figure>


<p>isinstance() 与 type() 区别：</p>
<ul>
<li>type() 不会认为子类是一种父类类型，不考虑继承关系。</li>
<li>isinstance() 会认为子类是一种父类类型，考虑继承关系。<br>如果要判断两个类型是否相同推荐使用 isinstance()。<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"> </span><br><span class="line">isinstance(A(), A)    <span class="comment"># returns True</span></span><br><span class="line">type(A()) == A        <span class="comment"># returns True</span></span><br><span class="line">isinstance(B(), A)    <span class="comment"># returns True</span></span><br><span class="line">type(B()) == A        <span class="comment"># returns False</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="2">
<li>针对字符串的判别函数</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s.isalnum() 所有字符都是数字或者字母</span><br><span class="line">s.isalpha() 所有字符都是字母</span><br><span class="line">s.isdigit() 所有字符都是数字</span><br><span class="line">s.islower() 所有字符都是小写</span><br><span class="line">s.isupper() 所有字符都是大写</span><br><span class="line">s.istitle() 所有单词都是首字母大写，像标题</span><br><span class="line">s.isspace() 所有字符都是空白字符、\t、\n、\r</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>对于数字的判别</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">isdigit()</span><br><span class="line">True: Unicode数字，byte数字（单字节），全角数字（双字节），罗马数字</span><br><span class="line">False: 汉字数字</span><br><span class="line">Error: 无</span><br><span class="line"></span><br><span class="line">isdecimal()</span><br><span class="line">True: Unicode数字，，全角数字（双字节）</span><br><span class="line">False: 罗马数字，汉字数字</span><br><span class="line">Error: byte数字（单字节）</span><br><span class="line"></span><br><span class="line">isnumeric()</span><br><span class="line">True: Unicode数字，全角数字（双字节），罗马数字，汉字数字</span><br><span class="line">False: 无</span><br><span class="line">Error: byte数字（单字节）</span><br></pre></td></tr></table></figure>
<p>具体实例可以看<a href="https://www.cnblogs.com/guigujun/p/6133057.html" target="_blank" rel="noopener">这里</a></p>
<ol start="4">
<li>字符串的拼接</li>
</ol>
<p>在python 开发中，很多时候需要使用到字符串拼接，python 字符串拼接有很多，这里就总结一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">格式化类：%、format()、template</span><br><span class="line">拼接类：+、()、join()</span><br><span class="line">插值类：f-string</span><br></pre></td></tr></table></figure>

<ol>
<li>使用<code>+</code> 拼接</li>
<li>使用 <code>%</code> 拼接</li>
<li>使用 <code>join()</code> 方法拼接</li>
<li>使用 <code>format()</code> 方法拼接</li>
<li>使用 <code>f-string</code> 拼接</li>
</ol>
<p>** 使用<code>+</code> 拼接**</p>
<p>这个适合数据量比价小的时候，当总长度小于 20 的时候，可以使用</p>
<p><strong>使用 <code>%</code> 拼接</strong></p>
<p>借鉴了C语言中 printf 函数的功能，如果你有C语言基础，看下文档就知道了。这种方式用符号“%”连接一个字符串和一组变量，字符串中的特殊标记会被自动用右边变量组中的变量替换：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> <span class="string">'%s %s'</span>%(<span class="string">'Python'</span>, <span class="string">'Tab'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>使用 <code>join()</code> 方法拼接</strong><br>如果你想要合并的字符串是在一个序列或者 iterable 中，那么最快的方式就是使用 join() 方法。比如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>parts = [<span class="string">'Is'</span>, <span class="string">'Chicago'</span>, <span class="string">'Not'</span>, <span class="string">'Chicago?'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">' '</span>.join(parts)</span><br><span class="line"><span class="string">'Is Chicago Not Chicago?'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">','</span>.join(parts)</span><br><span class="line"><span class="string">'Is,Chicago,Not,Chicago?'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">''</span>.join(parts)</span><br><span class="line"><span class="string">'IsChicagoNotChicago?'</span></span><br></pre></td></tr></table></figure>


<p><strong>使用 <code>format()</code> 方法拼接</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'There are &#123;&#125;, &#123;&#125;, &#123;&#125; on the table'</span></span><br><span class="line">str.format(fruit1,fruit2,fruit3)</span><br></pre></td></tr></table></figure>
<p>还可以指定参数对应位置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'There are &#123;2&#125;, &#123;1&#125;, &#123;0&#125; on the table'</span></span><br><span class="line">str.format(fruit1,fruit2,fruit3) <span class="comment">#fruit1出现在0的位置</span></span><br></pre></td></tr></table></figure>

<p>最重要的需要引起注意的是，当我们使用加号(+)操作符去连接大量的字符串的时候是非常低效率的， 因为加号连接会引起内存复制以及垃圾回收操作。 特别的，你永远都不应像下面这样写字符串连接代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> parts:</span><br><span class="line">    s += p</span><br></pre></td></tr></table></figure>

<p>同样还得注意不必要的字符串连接操作。有时候程序员在没有必要做连接操作的时候仍然多此一举。比如在打印的时候：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(a + <span class="string">':'</span> + b + <span class="string">':'</span> + c) <span class="comment"># Ugly</span></span><br><span class="line">print(<span class="string">':'</span>.join([a, b, c])) <span class="comment"># Still ugly</span></span><br><span class="line">print(a, b, c, sep=<span class="string">':'</span>) <span class="comment"># Better</span></span><br></pre></td></tr></table></figure>

<p>当混合使用I/O操作和字符串连接操作的时候，有时候需要仔细研究你的程序。 比如，考虑下面的两端代码片段：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Version 1 (string concatenation)</span></span><br><span class="line">f.write(chunk1 + chunk2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Version 2 (separate I/O operations)</span></span><br><span class="line">f.write(chunk1)</span><br><span class="line">f.write(chunk2)</span><br></pre></td></tr></table></figure>
<p>如果两个字符串很小，那么第一个版本性能会更好些，因为I/O系统调用天生就慢。 另外一方面，如果两个字符串很大，那么第二个版本可能会更加高效， 因为它避免了创建一个很大的临时结果并且要复制大量的内存块数据。 还是那句话，有时候是需要根据你的应用程序特点来决定应该使用哪种方案。</p>
<p>这种方式也</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'python'</span>, <span class="string">'tab'</span> ,<span class="string">'i'</span>, sep =<span class="string">','</span>)</span><br></pre></td></tr></table></figure>


<p><strong>使用 <code>f-string</code> 拼接</strong></p>
<p>从Python3.6版本引入。这种方式在可读性上秒杀format()方式，处理长字符串的拼接时，速度与join()方法相当。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">'world'</span></span><br><span class="line">myname = <span class="string">'python_cat'</span></span><br><span class="line">words = <span class="string">f'Hello <span class="subst">&#123;name&#125;</span>. My name is <span class="subst">&#123;myname&#125;</span>.'</span></span><br><span class="line">print(words)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Hello world. My name <span class="keyword">is</span> python_cat.</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<p>当要处理字符串列表等序列结构时，采用join()方式；拼接长度不超过20时，选用+号操作符方式；长度超过20的情况，高版本选用f-string，低版本时看情况使用format()或join()方式。</p>
<p><strong>python中strip()，lstrip()，rstrip()函数</strong></p>
<p>想要去掉什么字符，那么就传入什么字符，默认是空格。如果没有输入，那么就是删除首尾空格的意思： strip() 删除前导和后缀字符</p>
<p>但是当有了参数（<strong>传入的是一个字符数组</strong>）那么就会删除所有字符数组中的所有数组。比如说：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">theString = <span class="string">'saaaay yes no yaaaass'</span></span><br><span class="line"><span class="keyword">print</span> theString.strip(<span class="string">'say'</span>) </span><br><span class="line"><span class="keyword">print</span> theString.strip(<span class="string">'say '</span>) <span class="comment">#say后面有空格 </span></span><br><span class="line"><span class="keyword">print</span> theString.lstrip(<span class="string">'say'</span>) </span><br><span class="line"><span class="keyword">print</span> theString.rstrip(<span class="string">'say'</span>) </span><br><span class="line"><span class="comment"># 输出结果是</span></span><br><span class="line">yes no </span><br><span class="line">es no </span><br><span class="line">yes no yaaaass </span><br><span class="line">saaaay yes no</span><br></pre></td></tr></table></figure>


<p>Python 中的 <code>is</code> 和 <code>==</code></p>
<p><code>is</code> is the identity comparison. #比较引用是否相同</p>
<p><code>==</code> is the equality comparison. #比较内容是否相同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The operator a is b returns True if a and b are bound to the same object, otherwise False. When you create two empty lists you get two different objects, so is returns False (and therefore is notreturns True)</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>magic method</li>
</ol>
<p>定义：函数声明时候的函数名是以双下划线开始和结尾的，比如说<code>__init__</code>这样的函数声明，被认为是 magic函数。常见的魔法函数有以下几种：</p>
<p>（1）创建 <code>__new__</code>函数</p>
<p>创建类并且返回类的实例。</p>
<p>（2）初始化<code>__init__</code>函数</p>
<p>初始化该实例</p>
<p>（3）<code>__str__</code>函数</p>
<p>（4）<code>__len__</code>函数</p>
<p>运算符相关的魔法方法很多，比如说<br>（5）<code>__cmp__()</code>函数</p>
<p>（6）<code>__eq__()</code>函数</p>
<p>（7）<code>__add__(self, other)</code>函数</p>
<p>python中魔术方法（magic method）是一种重载（overloading）函数。</p>
<p>（6）python交换值为何不使用中间变量</p>
<p>在C++和C 中交换两个变量需要使用到临时变量<code>tmp</code>，但是在python 中是不必的。交换两个变量一般使用如下的语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x, y  =y, x</span><br></pre></td></tr></table></figure>

<p>一般来说python语句是从左到右解析的，但是在赋值操作的时候，因为右值具有更高的计算优先级，所以是从右到左解析的。执行顺序如下：</p>
<ul>
<li>计算等号右边 <code>y, x</code> （可能是比较复杂的表达式），然后创建元组，分别存储 <code>y, x</code>的值</li>
<li>计算左边的标识符，元组中的element 分别赋值（如果等号左右两边标识符数量不等的时候会出现 <code>ValueError</code>， 当左边只有一个变量时候，右边计算值就pack成一个元组传递给了左边的变量）</li>
</ul>
<h2 id="python2-和python3-的差异"><a href="#python2-和python3-的差异" class="headerlink" title="python2 和python3 的差异"></a>python2 和python3 的差异</h2><p>使用了<code>from __future__ import xxx</code>可以在python2，python3环境下运行同一份代码而不出错</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> absolute_import</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br></pre></td></tr></table></figure>

<p>以 为<a href="https://www.cnblogs.com/ajianbeyourself/p/4471035.html" target="_blank" rel="noopener">例子</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">now = datetime.now()</span><br><span class="line"><span class="keyword">print</span> now.strftime(<span class="string">'%m月%d日 %H:%M'</span>)</span><br><span class="line"><span class="comment">#  03月12日 21:53</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">now = datetime.now()</span><br><span class="line"><span class="keyword">print</span> now.strftime(<span class="string">'%m月%d日 %H:%M'</span>)</span><br><span class="line"><span class="comment"># 报错 UnicodeEncodeError: 'ascii' codec can't encode character u'\u6708' in position 2: ordinal not in range(128)</span></span><br></pre></td></tr></table></figure>
<p>原因： 因为datetime.strftime()只接受str类型的字符串，不接受unicode类型的字符串。<br>解决方案：<br>推荐做法： 传入 str类型的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">now = datetime.now()</span><br><span class="line"><span class="keyword">print</span> now.strftime(<span class="string">'%m月%d日 %H:%M'</span>.encode(<span class="string">'utf-8'</span>))  <span class="comment"># 指明str类型字符串</span></span><br></pre></td></tr></table></figure>
<p>不推荐做法： 设置运行的时候的编码为 utf-8</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">now = datetime.now()</span><br><span class="line"><span class="keyword">print</span> now.strftime(<span class="string">'%m月%d日 %H:%M'</span>)</span><br></pre></td></tr></table></figure>


<h2 id="python中-的使用"><a href="#python中-的使用" class="headerlink" title="python中*的使用"></a>python中<code>*</code>的使用</h2><p>python 中 <code>*</code>有乘法和赋值 (<code>[1] *5</code>) 的用法，除此之外还有解压（unpack）的功能。而zip() 是压缩的功能，如下代码所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stuff = [<span class="string">'apple'</span>,<span class="string">'banana'</span>,<span class="string">'peach'</span>]</span><br><span class="line">money = [<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line">pair = list(zip(stuff,money))</span><br><span class="line"><span class="comment"># pair = [('apple',10),('banana',5),('peach',7)]</span></span><br></pre></td></tr></table></figure>
<p>同样的，当我们想要还原成原来的两个list， stuff 和money 时候，我们需要用到 <code>*</code> 符号。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stuff, money &#x3D;zip(*pair)</span><br></pre></td></tr></table></figure>

<p>当然，并不是说 <code>*</code>只能使用在 list 中，凡是可迭代对象都是可以使用 <code>*</code>符号。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">do_something</span><span class="params">(x,y,z)</span>:</span></span><br><span class="line">    print(<span class="string">'x is '</span>, x)</span><br><span class="line">    print(<span class="string">'y is '</span>, y)</span><br><span class="line">    print(<span class="string">'z is '</span>, z)</span><br><span class="line"></span><br><span class="line">list1 = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line">do_something(*list1)</span><br></pre></td></tr></table></figure>

<p>可见， <code>*</code>操作符自动将list1 中的三个元素赋给了三个形参，所以是一种非常方便的用法。</p>
<p><code>**</code> 的用法</p>
<p>对于字典（dict） 来说，也是可以使用<code>*</code>运算符，但是一个 <code>*</code> 得到的是key 值，如果想要得到 value 值，那么是需要使用 <code>**</code>运算符。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dict2 = &#123;<span class="string">'z'</span>:<span class="number">1</span>, <span class="string">'x'</span>:<span class="number">2</span>, <span class="string">'y'</span>:<span class="number">3</span>&#125;</span><br><span class="line">do_something(**dict2)</span><br></pre></td></tr></table></figure>
<p>所以上面那种传参的方式就是在程序中经常见到的。</p>
<p><code>*args</code> 和 <code>**kwargs</code> 是我们经常见到的两个参数。用法很简单，当不确定有什么待传入的参数时候，就使用<code>*args</code> 将形参传入到 <code>args</code> 元组里面。同理 <code>**kwargs</code>效果则是将输入的未定义的形参及其对应的值存在kwargs字典。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">intro</span><span class="params">(**data)</span>:</span></span><br><span class="line">    print(<span class="string">"\nData type of argument:"</span>,type(data))</span><br><span class="line">    <span class="keyword">for</span> key, value <span class="keyword">in</span> data.items():</span><br><span class="line">        print(<span class="string">"&#123;&#125; is &#123;&#125;"</span>.format(key,value))</span><br><span class="line"></span><br><span class="line">intro(Firstname=<span class="string">"Sita"</span>, Lastname=<span class="string">"Sharma"</span>, Age=<span class="number">22</span>, Phone=<span class="number">1234567890</span>)</span><br></pre></td></tr></table></figure>

<p>也可以进行字典的合并 <code>**</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date_info = &#123;<span class="string">'year'</span>: <span class="string">"2020"</span>, <span class="string">'month'</span>: <span class="string">"01"</span>, <span class="string">'day'</span>: <span class="string">"01"</span>&#125; </span><br><span class="line">track_info = &#123;<span class="string">'artist'</span>: <span class="string">"Beethoven"</span>, <span class="string">'title'</span>: <span class="string">'Symphony No 5'</span>&#125; </span><br><span class="line">all_info = &#123;**date_info, **track_info&#125;</span><br></pre></td></tr></table></figure>





<h2 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h2><blockquote>
<p>We do not need true randomness in machine learning. Instead we can use pseudorandomness. Pseudorandomness is a sample of numbers that look close to random, but were generated using a deterministic process.<br>很难得到到真实的随机数，然而是可以生成伪随机数。</p>
</blockquote>
<p>python 中的random() 库函数是基于马特赛特旋转演算法 （Mersenne Twister）算法生成的。</p>
<blockquote>
<p>The pseudorandom number generator is a mathematical function that generates a sequence of nearly random numbers. It takes a parameter to start off the sequence, called the seed. The function is deterministic, meaning given the same seed, it will produce the same sequence of numbers every time. The choice of seed does not matter.<br>给定特定的种子（seed），可以产生 deterministic 的结果，所以可以重复多次，所以可以复现相同的实验结果。</p>
</blockquote>
<h3 id="Random-with-Python"><a href="#Random-with-Python" class="headerlink" title="Random with Python"></a>Random with Python</h3><p>（1） Random Floating Point Values</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">10</span>): <span class="comment"># generate random numbers between 0-1</span></span><br><span class="line">	val =random()</span><br><span class="line">	print(val)</span><br></pre></td></tr></table></figure>
<p>产生的是[0, 1]区间的浮点数，可以 rescale to 任意的范围。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scaled_value =min +(val *(max -min))</span><br></pre></td></tr></table></figure>

<p>（2） Random Integer Values</p>
<p>使用 <code>randint()</code> 得到整数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">frmo random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"></span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">	val =randint(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">	print(val)</span><br></pre></td></tr></table></figure>

<p>（3）Random Gaussian Values</p>
<p>使用的是 <code>gauss</code> 分布。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> gauss</span><br><span class="line"></span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">	val =gauss(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">	print(val)</span><br></pre></td></tr></table></figure>

<p>（4） Random Choosing From a List</p>
<p>使用到了 <code>choice()</code> 函数，choice 每次只是选择了其中的一个。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</span><br><span class="line"></span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">sequence =[i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">20</span>)]</span><br><span class="line">print(sequence)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">	selection =choice(sequence)</span><br><span class="line">	print(selection)</span><br></pre></td></tr></table></figure>

<p>（5）Random Subsample From a List</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> sample</span><br><span class="line"></span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">sequence =[i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">20</span>)]</span><br><span class="line">print(sequence)</span><br><span class="line"><span class="comment"># default without replacement，不放回抽样</span></span><br><span class="line">subset =sample(sequence, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sample with replacement vs sample without replacement</span><br><span class="line"></span><br><span class="line">两者的区别： 前者是有放回的，所以两次sample 是独立的；后者是没有放回的，两次sample是不独立的。</span><br></pre></td></tr></table></figure>


<p>python 中的 <code>random.sample()</code> 默认是没有放回抽样的。如果想要实现，一种方式是基于 <code>randint()</code> 改造，一种是使用numpy 中的函数：<code>numpy.random.choice(replace =True)</code>。但是python自带的包中可以设置 <code>weight</code>权重，也就是有权重的sample。</p>
<p>（5） Randomly Shuffle a List</p>
<p>shuffle 操作在python 中是 <code>in-place()</code> 的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> shuffle</span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line">sequence =[i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line">print(sequence)</span><br><span class="line"></span><br><span class="line">shuffle(sequence)</span><br><span class="line">print(sequence)</span><br></pre></td></tr></table></figure>





<h3 id="Random-Numbers-with-Numpy"><a href="#Random-Numbers-with-Numpy" class="headerlink" title="Random Numbers with Numpy"></a>Random Numbers with Numpy</h3><blockquote>
<p>The NumPy pseudorandom number generator is different from the Python standard library pseudorandom number generator. Importantly, seeding the Python pseudorandom number generator does not impact the NumPy pseudorandom number generator. It must be seeded and used separately.<br>Numpy 中有自己实现的Random 机制，该机制和Numpy 中的机制不一样，当然Numpy 中也有马特赛特旋转演算法 （Mersenne Twister）算法。重要的是，两者是需要单独设置的。</p>
</blockquote>
<p>（1） Seed The Random Number Generator</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># seed the pseudorandom number generator</span></span><br><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> rand</span><br><span class="line"><span class="comment"># seed random number generator</span></span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># generate some random numbers</span></span><br><span class="line">print(rand(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<p>（2）Array of Random Floating Point Values</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> rand</span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line">vals =rand(<span class="number">10</span>)</span><br><span class="line">print(vals)</span><br></pre></td></tr></table></figure>
<p>（3）Array of     Random Integer Values</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> randint</span><br><span class="line"></span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># start, end, numbers</span></span><br><span class="line">values =randint(<span class="number">0</span>, <span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">print(values)</span><br></pre></td></tr></table></figure>


<p>（4）Array of Random Gaussian Values</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy.randon <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> randn</span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line">values =randn(<span class="number">10</span>)</span><br><span class="line">print(values)</span><br></pre></td></tr></table></figure>

<p>（5）Shuffle Numpy Array<br>这个也是 in-place 的操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> seed</span><br><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> shuffle</span><br><span class="line">seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">sequence =[i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">20</span>)]</span><br><span class="line">print(sequence)</span><br><span class="line">shuffle(sequence)</span><br><span class="line">print(sequence)</span><br></pre></td></tr></table></figure>

<p>总结：<br>随机数的生成需要设置 <code>seed</code>，如果生成number，那么使用 <code>python standard library</code>； 如果是生成array, 那么使用 <code>NumPy library</code>。</p>
<p>参考文献</p>
<p><a href="https://machinelearningmastery.com/how-to-generate-random-numbers-in-python/" target="_blank" rel="noopener">How to Generate Random Numbers in Python</a></p>
<h2 id="python-中的import-函数"><a href="#python-中的import-函数" class="headerlink" title="python 中的import 函数"></a>python 中的import 函数</h2><p>（1）搜索路径</p>
<p>首先是当前的路径，然后是一些内置函数的路径，重要的是如果加上 <code>sys.path.append(path)</code> ，可以添加自定义的路径, path可以是相对路径或者是绝对路径。其中 <code>.</code> 表示当前目录（同一级别的）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">print(sys.path)</span><br><span class="line">sys.path.append(<span class="string">".."</span>) </span><br><span class="line">print(sys.path)</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&#39;&#x2F;home&#x2F;jeng&#x2F;projects&#x2F;named_entity_recognition&#39;, &#39;&#x2F;home&#x2F;jeng&#x2F;anaconda3&#x2F;lib&#x2F;python37.zip&#39;, &#39;&#x2F;home&#x2F;jeng&#x2F;anaconda3&#x2F;lib&#x2F;python3.7&#39;, &#39;&#x2F;home&#x2F;jeng&#x2F;anaconda3&#x2F;lib&#x2F;python3.7&#x2F;lib-dynload&#39;, &#39;&#x2F;home&#x2F;jeng&#x2F;anaconda3&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#39;]</span><br><span class="line">[&#39;&#x2F;home&#x2F;jeng&#x2F;projects&#x2F;named_entity_recognition&#39;, &#39;&#x2F;home&#x2F;jeng&#x2F;anaconda3&#x2F;lib&#x2F;python37.zip&#39;, &#39;&#x2F;home&#x2F;jeng&#x2F;anaconda3&#x2F;lib&#x2F;python3.7&#39;, &#39;&#x2F;home&#x2F;jeng&#x2F;anaconda3&#x2F;lib&#x2F;python3.7&#x2F;lib-dynload&#39;, &#39;&#x2F;home&#x2F;jeng&#x2F;anaconda3&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#39;, &#39;..&#39;]</span><br></pre></td></tr></table></figure>

<p>（2）import语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import os, sys, time   # 虽然可以一次导入多个，但是不建议这样做，不是python 风格</span><br><span class="line">import sys as system # 建议一条语句导入一个</span><br><span class="line">import solongname as shortname # 这个也是可以的</span><br></pre></td></tr></table></figure>


<p>（2）<code>from ... import *</code></p>
<p>from-import 是导入指定模块中指定方法的方式。将一个模块中所有内容全部导入到当前的命名空间，只需要使用如下的声明：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> modname <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure>

<p>一般不建议这样写，太消耗内存，不要过多这样使用。唯一推荐全部导入的只有 <code>Tkinter</code>（是python 中的一个gui 框架）。可以选择一个折中的方案， 从 <code>os</code>中导入5 个函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> path, walk, unlink, uname, remove, rename</span><br></pre></td></tr></table></figure>



<p>（3）reload() 函数</p>
<p>当一个模块被导入到一个脚本，模块顶层部分的代码只会被执行一次。因此，如果你想重新执行模块里顶层部分的代码，可以用 reload() 函数。该函数会重新导入之前导入过的模块。语法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reload(module_name)</span><br></pre></td></tr></table></figure>

<p>（4）导入顺序</p>
<p>1). python 标准库模块<br>2). python 第三方模块<br>3). 自定义模块</p>
<p>（5）可选导入</p>
<p>可以使用该方式去处理版本问题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># For Python 3</span></span><br><span class="line">    <span class="keyword">from</span> http.client <span class="keyword">import</span> responses</span><br><span class="line"><span class="keyword">except</span> ImportError:  <span class="comment"># For Python 2.5-2.7</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">from</span> httplib <span class="keyword">import</span> responses  <span class="comment"># NOQA</span></span><br><span class="line">    <span class="keyword">except</span> ImportError:  <span class="comment"># For Python 2.4</span></span><br><span class="line">        <span class="keyword">from</span> BaseHTTPServer <span class="keyword">import</span> BaseHTTPRequestHandler <span class="keyword">as</span> _BHRH</span><br><span class="line">        responses = dict([(k, v[<span class="number">0</span>]) <span class="keyword">for</span> k, v <span class="keyword">in</span> _BHRH.responses.items()])</span><br></pre></td></tr></table></figure>

<p>（6）局部导入</p>
<p>当再次需要使用 <code>math</code> 模块的时候，还是需要再次导入，所以平衡好是全局导入还是局部导入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import sys # 全局导入</span><br><span class="line"></span><br><span class="line">def square_root(a):</span><br><span class="line">	import math # 局部</span><br><span class="line">	return math.sqrt(a)</span><br></pre></td></tr></table></figure>


<p>（7）python 中的 <code>-m</code> 参数</p>
<p>如果在运行的时候，加上了 <code>-m</code> 参数，那么将导入的包先运行，然后再运行本脚本</p>
<p><code>__main__.py</code>文件与python -m<br>Python的-m参数用于将一个模块或者包作为一个脚本运行，而<strong>main</strong>.py文件相当于是一个包的“入口程序“。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-m module-name：Searches sys.path for the named module and runs the corresponding .py file as a script.</span><br></pre></td></tr></table></figure>

<p>比如下面的例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">package</span><br><span class="line">├── __init__.py</span><br><span class="line">└── __main__.py</span><br></pre></td></tr></table></figure>

<p>其中 <code>__init__.py</code> 文件内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"__init__"</span>)</span><br></pre></td></tr></table></figure>
<p>其中 <code>__main__.py</code> 文件内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"__main__"</span>)</span><br></pre></td></tr></table></figure>

<p>当使用 <code>python -m</code>执行，先是执行了init 函数，然后是main 函数。输出是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">__init__</span><br><span class="line">__main__</span><br></pre></td></tr></table></figure>

<p>当使用 <code>python</code>执行的时候，直接执行 main, 输出是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__main__</span><br></pre></td></tr></table></figure>

<p>所以不管加不加 <code>-m</code>，最后的 main函数都是会被执行。加上 <code>-m</code> 会将模块或者包导入之后才执行</p>
<p>（8）<code>__name__ ==&quot;__main__&quot;</code>的作用</p>
<p>很多编程语言都有一个入口，比如C++、C 和Java中都需要一个 <code>main</code> 函数作为程序的入口。但是和上述的编译语言不同，Python属于脚本语言，不需要编译成二进制执行，而是动态逐行解释运行，可以没有统一的入口。所以可以没有 <code>main</code>函数入口。</p>
<p>但是除了作为脚本语言直接被运行外，还是可以作为模块（库）被其他 <code>.py</code> 文件导入。所有的模块中都有一个内置的属性 <code>__name__</code>，表示当前模块的名字。如果被当做脚本运行，<code>__name__</code>值为<code>__main__</code>。而被别的模块引用的时候， <code>__name__</code>值为模块的名字。</p>
<p>总结：</p>
<p><code>__name__</code> 可以用于调试代码：当脚本执行，在 <code>if __name__ == &#39;__main__</code> 中的代码会被执行；而被别的模块所引用的时候，因为这个时候的 <code>__name__</code> 不是 main ，所以该函数不会被执行。</p>
<p>在Python中，使用单引号(‘)和双引号(“)定义的字符串没有区别。</p>
<h2 id="Python多线程和多进程"><a href="#Python多线程和多进程" class="headerlink" title="Python多线程和多进程"></a>Python多线程和多进程</h2><p>多线程和多进程问题是可以对应到 并发 （cncurrency）和并行(parallelism)上的。 并发，就是一个单核cpu同时开始了多个任务，但是这个任务并不是同时独立进行的，而是通过cpu的不断切换，保存现场，然后重启这样的快速的切换，给用户的感觉是并发，但是实际上是cpu的计算能力受到了限制，用户体验比较好一些。如果在多核cpu （比如我的mac 是一cpu 6核）这样的话完全是可以达到并行的，这个是真正的独立操作(parallelism)，对应的是多进程的。对应python 中的实现多线程是使用threading，处理的是io 响应；多进程是Concurrency，使用multiprocessing包，处理的是多核cpu的操作。</p>
<p>Take off: 如果处理io 响应，那么使用多线程；如果是计算，那么使用多进程。</p>
<blockquote>
<p>So, before we go deeper into the multiprocessing module, it’s worthwhile ensuring you know the advantages of using multiprocessing over multithreading. The general rule of thumb is that, if you are trying to improve the performance of CPU-bound tasks, multiprocessing is what you want to use. However, if your particular task is Input/Output bound, then you’ll generally want to use multithreading to improve the performance of your applications.</p>
</blockquote>
<p>这个是多线程的demo 响应的io 请求。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="comment"># Our workers constructor, note the super() method which is vital if we want this</span></span><br><span class="line">    <span class="comment"># to function properly</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Worker, self).__init__()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">            print(i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    thread1 = Worker()</span><br><span class="line">    thread1.start()</span><br><span class="line"></span><br><span class="line">    thread2 = Worker()</span><br><span class="line">    thread2.start()</span><br><span class="line"></span><br><span class="line">    thread3 = Worker()</span><br><span class="line">    thread3.start()</span><br><span class="line"></span><br><span class="line">    thread4 = Worker()</span><br><span class="line">    thread4.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p>下面是多进程的demo响应的计算请求。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_func</span><span class="params">(x)</span>:</span></span><br><span class="line">    print(mp.current_process())</span><br><span class="line">    <span class="keyword">return</span> x ** x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    pool = mp.Pool(mp.cpu_count())</span><br><span class="line">    <span class="comment"># 这个还是很好的 pool 这个的个数和你的cpu count 是保持一致的</span></span><br><span class="line">    result = pool.map(my_func, [<span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line">    result_set_2 = pool.map(my_func, [<span class="number">4</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">23</span>, <span class="number">4</span>, <span class="number">6</span>])</span><br><span class="line">    print(result)</span><br><span class="line">    print(result_set_2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>



<p>python 多进程下载图片的功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing.dummy <span class="keyword">import</span> Pool <span class="keyword">as</span> ThreadPool</span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span>  requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从数据库中查出来所要下载的图片 url，加入 ImgUrlList = [] 列表</span></span><br><span class="line">client = pymongo.MongoClient(host=<span class="string">''</span>, port=<span class="number">27017</span>)</span><br><span class="line">db = client.dwr</span><br><span class="line">collection = db.Accessories</span><br><span class="line"></span><br><span class="line">dic1 = collection.find(&#123;<span class="string">'Collection'</span>: <span class="string">'Accessories'</span>&#125;)</span><br><span class="line">ImgUrlList = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dic1:</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> i[<span class="string">'ImageUrl'</span>]:</span><br><span class="line">        ImgUrlList.append(k)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 图片下载方法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">downImg</span><span class="params">(url)</span>:</span></span><br><span class="line">        a= url.split(<span class="string">'/'</span>)[<span class="number">-1</span>]</span><br><span class="line">        name = re.findall(<span class="string">'(.*?)\?wid'</span>, a)[<span class="number">0</span>] + <span class="string">'.jpg'</span><span class="string">'</span></span><br><span class="line"><span class="string">        B ="target_dir" +name</span></span><br><span class="line"><span class="string">        if not os.path.exists(B):</span></span><br><span class="line"><span class="string">            r = requests.get(url)</span></span><br><span class="line"><span class="string">            with open(B, '</span>w<span class="string">b') as f:</span></span><br><span class="line"><span class="string">                f.write(r.content)</span></span><br><span class="line"><span class="string">                print(B)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 相当于上面是一个function，然后放入到多进程的池子中</span></span><br><span class="line"><span class="string">pool = ThreadPool()</span></span><br><span class="line"><span class="string">results = pool.map(downImg, ImgUrlList);</span></span><br><span class="line"><span class="string">pool.close();</span></span><br><span class="line"><span class="string">pool.join();</span></span><br></pre></td></tr></table></figure>





<h3 id="python中-pickle-模块"><a href="#python中-pickle-模块" class="headerlink" title="python中 pickle 模块"></a>python中 pickle 模块</h3><p>pickle模块是python中用来持久化对象的一个模块。所谓对对象进行持久化，即将对象的数据类型、存储结构、存储内容等所有信息作为文件保存下来以便下次使用。在神经网络中训练的模型也是可以经过序列化处理的，需要注意的是以二进制保存和读取的内容，所以在读写的时候需要加上 <code>b</code> 超参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 向文件中写入 pickle 对象</span></span><br><span class="line"><span class="comment">#导入pickle模块</span></span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个名为data1的对象</span></span><br><span class="line">data1 = &#123;<span class="string">'a'</span>: <span class="string">'123'</span>, <span class="string">'b'</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#打开(或创建)一个名为data1.pkl的文件，打开方式为二进制写入(参数‘wb’)</span></span><br><span class="line">file_to_save = open(<span class="string">"data1.pkl"</span>, <span class="string">"wb"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#通过pickle模块中的dump函数将data1保存到data1.pkl文件中。</span></span><br><span class="line"><span class="comment">#第一个参数是要保存的对象名</span></span><br><span class="line"><span class="comment">#第二个参数是写入到的类文件对象file。file必须有write()接口， file可以是一个以'w'方式打开的文件或者一个StringIO对象或者其他任何实现write()接口的对象。如果protocol&gt;=1，文件对象需要是二进制模式打开的。</span></span><br><span class="line"><span class="comment">#第三个参数为序列化使用的协议版本，0：ASCII协议，所序列化的对象使用可打印的ASCII码表示；1：老式的二进制协议；2：2.3版本引入的新二进制协议，较以前的更高效；-1：使用当前版本支持的最高协议。其中协议0和1兼容老版本的python。protocol默认值为0。</span></span><br><span class="line">pickle.dump(data1, file_to_save, <span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件对象</span></span><br><span class="line">file_to_save.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从文件中读取 pickle 对象</span></span><br><span class="line"><span class="comment">#导入pickle模块</span></span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"><span class="comment">#打开一个名为data1.pkl的文件，打开方式为二进制读取(参数‘rb’)</span></span><br><span class="line">file_to_read = open(<span class="string">'data1.pkl'</span>, <span class="string">'rb'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#通过pickle的load函数读取data1.pkl中的对象，并赋值给data2</span></span><br><span class="line">data2 = pickle.load(file_to_read)</span><br><span class="line"></span><br><span class="line"><span class="comment">#打印data2</span></span><br><span class="line"><span class="keyword">print</span> data2</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件对象</span></span><br><span class="line">file_to_read.close()</span><br></pre></td></tr></table></figure>


<h3 id="easydict"><a href="#easydict" class="headerlink" title="easydict"></a>easydict</h3><p>python 中的easydict 的使用，比系统自带dict 更加方便的字典 EasyDict。</p>
<p>easydict的作用：可以使得以属性的方式去访问字典的值！所以主要是写得方便。<br>···<br>pip install easyinstall<br>····<br>使用代码：</p>
<p>···python<br>from easydict import EasyDict as edict<br>easy = edict(d = {‘foo’:3, ‘bar’:{‘x’:1, ‘y’:2}}) # 将普通的字典传入到edict()<br>print(easy[‘foo’]) # 这是传统的方法<br>print(easy.foo) # 这是我们使用easydict输出二者结果是一样的，但是可以更为方便的使用字典了<br>print(easy.bar.x) # 我们也是可以很方便的使用字典中字典的元素了<br>····</p>
<p>解析json目录时很有用</p>
<h3 id="python中的文件遍历"><a href="#python中的文件遍历" class="headerlink" title="python中的文件遍历"></a>python中的文件遍历</h3><p>（1）os.listdir</p>
<p>适用情况：在一个目录下面只有文件，没有文件夹（有文件夹的时候会遍历到文件夹，但是不会继续递归往下遍历）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">file_name</span><span class="params">(file_dir)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> files <span class="keyword">in</span> os.listdir(file_dir):  <span class="comment"># 不仅仅是文件，当前目录下的文件夹也会被认为遍历到</span></span><br><span class="line">        print(<span class="string">"files："</span>, files)</span><br><span class="line">        </span><br><span class="line"><span class="comment">#files： A            # 指定路径文件夹的子文件</span></span><br><span class="line"><span class="comment">#files： B            # 指定路径文件夹的子文件</span></span><br><span class="line"><span class="comment">#files： text.txt     # 指定路径文件夹的非文件夹内容</span></span><br></pre></td></tr></table></figure>

<p>（2）os.walk</p>
<p>适用情况：递归的情况，一个目录下面既有目录（目录下面还可能有目录和文件）也有文件，如何读取里面所有文件，使用os.walk；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">file_name</span><span class="params">(file_site)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(file_dir):</span><br><span class="line">        print(<span class="string">"root"</span>, root)      <span class="comment"># 当前目录路径</span></span><br><span class="line">        print(<span class="string">"dirs"</span>, dirs)      <span class="comment"># 当前路径下所有子文件夹</span></span><br><span class="line">        print(<span class="string">"files"</span>, files)    <span class="comment"># 当前路径下所有非子文件夹的文件</span></span><br></pre></td></tr></table></figure>



<h3 id="switch-在python-中的实现"><a href="#switch-在python-中的实现" class="headerlink" title="switch 在python 中的实现"></a>switch 在python 中的实现</h3><p>c、c++ 中都有 switch (case )语句的实现，但是python 中就没有相关的实现，只能通过其他的方式去完成该功能。基本的思路是通过 dictionary</p>
<p>实现方式一</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">'a'</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">'b'</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;[x]</span><br></pre></td></tr></table></figure>

<p>实现方式二</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> x == <span class="string">'a'</span>:</span><br><span class="line">    <span class="comment"># Do the thing</span></span><br><span class="line"><span class="keyword">elif</span> x == <span class="string">'b'</span>:</span><br><span class="line">    <span class="comment"># Do the other thing</span></span><br><span class="line"><span class="keyword">if</span> x <span class="keyword">in</span> <span class="string">'bc'</span>:</span><br><span class="line">    <span class="comment"># Fall-through by not using elif, but now the default case includes case 'a'!</span></span><br><span class="line"><span class="keyword">elif</span> x <span class="keyword">in</span> <span class="string">'xyz'</span>:</span><br><span class="line">    <span class="comment"># Do yet another thing</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># Do the default</span></span><br></pre></td></tr></table></figure>

<p><a href="https://www.pydanny.com/why-doesnt-python-have-switch-case.html" target="_blank" rel="noopener">Why Doesn’t Python Have Switch/Case?</a> 比较详细介绍了在python 中为什么没有 switch -case 语句。</p>
<p>使用的是一种 dictionary 去实现了 switch 的功能 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">numbers_to_strings</span><span class="params">(argument)</span>:</span></span><br><span class="line">    switcher = &#123;</span><br><span class="line">        <span class="number">0</span>: <span class="string">"zero"</span>,</span><br><span class="line">        <span class="number">1</span>: <span class="string">"one"</span>,</span><br><span class="line">        <span class="number">2</span>: <span class="string">"two"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> switcher.get(argument, <span class="string">"nothing"</span>)</span><br></pre></td></tr></table></figure>

<p>比较复杂的版本（借助了 function）, function 中可以实现更加复杂的功能。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zero</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"zero"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">one</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"one"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">numbers_to_functions_to_strings</span><span class="params">(argument)</span>:</span></span><br><span class="line">    switcher = &#123;</span><br><span class="line">        <span class="number">0</span>: zero,</span><br><span class="line">        <span class="number">1</span>: one,</span><br><span class="line">        <span class="number">2</span>: <span class="keyword">lambda</span>: <span class="string">"two"</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># Get the function from switcher dictionary</span></span><br><span class="line">    func = switcher.get(argument, <span class="keyword">lambda</span>: <span class="string">"nothing"</span>)</span><br><span class="line">    <span class="comment"># Execute the function</span></span><br><span class="line">    <span class="keyword">return</span> func()</span><br></pre></td></tr></table></figure>

<p>使用类的形式 (更好的封装性能)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Switcher</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numbers_to_methods_to_strings</span><span class="params">(self, argument)</span>:</span></span><br><span class="line">        <span class="string">"""Dispatch method"""</span></span><br><span class="line">        <span class="comment"># prefix the method_name with 'number_' because method names</span></span><br><span class="line">        <span class="comment"># cannot begin with an integer.</span></span><br><span class="line">        method_name = <span class="string">'number_'</span> + str(argument)</span><br><span class="line">        <span class="comment"># Get the method from 'self'. Default to a lambda.</span></span><br><span class="line">        method = getattr(self, method_name, <span class="keyword">lambda</span>: <span class="string">"nothing"</span>)</span><br><span class="line">        <span class="comment"># Call the method as we return it</span></span><br><span class="line">        <span class="keyword">return</span> method()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">number_0</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"zero"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">number_1</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"one"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">number_2</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"two"</span></span><br></pre></td></tr></table></figure>



<h2 id="python-中的with-statement"><a href="#python-中的with-statement" class="headerlink" title="python 中的with statement"></a>python 中的with statement</h2><p>遇到with是在文件那一章，with的作用是就是会自动关掉文件管道。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'path'</span>,<span class="string">'读写模式‘) as f:</span></span><br><span class="line"><span class="string">    do something</span></span><br></pre></td></tr></table></figure>

<p>上面的功能等价于</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'path'</span>,<span class="string">'读写模式'</span>)</span><br><span class="line">do something</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>


<p>with statement 适合在消耗比较多的资源的情况下使用，是一种更好的管理资源的方式。</p>
<p>下面这种方式，需要手写 open 和close 语句。</p>
<blockquote>
<p>Perhaps the most common (and important) use of context managers is to properly manage resources. In fact, that’s the reason we use a context manager when reading from a file. The act of opening a file consumes a resource (called a file descriptor), and this resource is limited by your OS. That is to say, there are a maximum number of files a process can have open at one time. To prove it, try running this code:</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">files = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10000</span>):</span><br><span class="line">    f = open(<span class="string">'foo.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">    f.close()</span><br><span class="line">    files.append(f)</span><br></pre></td></tr></table></figure>


<blockquote>
<p>In other languages, developers are forced to use try…except…finally every time they work with a file (or any other type of resource that needs to be closed, like sockets or database connections). Luckily, Python loves us and gives us a simple way to make sure all resources we use are properly cleaned up, regardless of if the code returns or an exception is thrown: context managers.<br>是可以使用 try except 和finally 进行处理的，但是 python 中有更好的方式实现</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> something_that_returns_a_context_manager() <span class="keyword">as</span> my_resource:</span><br><span class="line">    do_something(my_resource)</span><br><span class="line">    ...</span><br><span class="line">    print(<span class="string">'done using my_resource'</span>)</span><br></pre></td></tr></table></figure>


<blockquote>
<p>That’s it! Using with, we can call anything that returns a context manager (like the built-in open() function). We assign it to a variable using … as <variable_name>. Crucially, the variable only exists within the indented block below the with statement. Think of with as creating a mini-function: we can use the variable freely in the indented portion, but once that block ends, the variable goes out of scope. When the variable goes out of scope, it automatically calls a special method that contains the code to clean up the resource.<br>这上面说 在with 之外的变量是无法访问的，但实际上就我的经验而言，貌似也是能够访问的。</p>
</blockquote>
<blockquote>
<p>这里说的with 之外的变量是无法访问，是指的文件 as 之后的变量，但是对于 <code>with</code> 缩进之内的变量是可以访问的。</p>
</blockquote>
<p>with 是如何工作的？</p>
<ul>
<li>紧跟with后面的语句被求值后,返回对象的’<strong>enter</strong>()’方法被调用,这个方法的返回值将被赋值给as后面的变量.</li>
<li>当with后面的代码块全部执行完之后,将被调用前面返回对象的<strong>exit</strong>()方法.</li>
</ul>
<p>总之，with-as表达式极大的简化了每次写finally的工作，这对保持代码的优雅性是有极大帮助的。如果有多个项，那么可以这样写</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">"x.txt"</span>) <span class="keyword">as</span> f1, open(<span class="string">'xxx.txt'</span>) <span class="keyword">as</span> f2:</span><br><span class="line">    do something <span class="keyword">with</span> f1,f2</span><br></pre></td></tr></table></figure>



<h3 id="python-和numpy-中关于类型函数"><a href="#python-和numpy-中关于类型函数" class="headerlink" title="python 和numpy 中关于类型函数"></a>python 和numpy 中关于类型函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type()    返回参数的数据类型</span><br><span class="line">dtype    返回数组中元素的数据类型</span><br><span class="line">astype()    对数据类型进行转换</span><br></pre></td></tr></table></figure>

<p>ndim返回的是数组的维度，返回的只有一个数，该数即表示数组的维度。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(arr1.ndim, arr2.ndim, arr3.ndim)</span><br><span class="line"># 返回的是一个数字，表示数组的维度</span><br></pre></td></tr></table></figure>


<p>shape：表示各位维度大小的元组。返回的是一个元组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(arr1.shape, arr2.shape, arr3.shape)</span><br><span class="line"># 返回的是一个元祖</span><br><span class="line"># (5,) (2, 3) (2, 2, 3)</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(arr1.dtype, arr2.dtype, arr3.dtype)</span><br><span class="line"># 返回的是数组的数据类型</span><br><span class="line"># int64 int64 int64</span><br></pre></td></tr></table></figure>


<ol start="3">
<li>astype</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr1.astype(&#39;int32&#39;)</span><br><span class="line"># 转换数组的数据类型</span><br><span class="line"># array([1, 2, 3, 4, 5], dtype&#x3D;int32)</span><br><span class="line"># int32 --&gt; float64        完全ojbk</span><br><span class="line"># float64 --&gt; int32        会将小数部分截断</span><br><span class="line"># string_ --&gt; float64        如果字符串数组表示的全是数字，也可以用astype转化为数值类型</span><br></pre></td></tr></table></figure>


<p>关于取整数 取小数的知识</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 数据转换 astype() 的知识</span><br><span class="line">a &#x3D;3.75</span><br><span class="line">int(a) # 向下取整</span><br><span class="line">round(a) # 四舍五入</span><br><span class="line"></span><br><span class="line">import math</span><br><span class="line">math.ceil(a) # 向上取整</span><br><span class="line"></span><br><span class="line"># 取整数和小数部分</span><br><span class="line">import math</span><br><span class="line">math.modf(3.25)</span><br><span class="line">#(0.25, 3.0)</span><br></pre></td></tr></table></figure>














      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/09/06/hmm/" rel="next" title="基于隐马尔科夫的命名实体识别">
                <i class="fa fa-chevron-left"></i> 基于隐马尔科夫的命名实体识别
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/11/17/entropy/" rel="prev" title="Entropy 相关的概念">
                Entropy 相关的概念 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpeg"
                alt="Jijeng Jia" />
            
              <p class="site-author-name" itemprop="name">Jijeng Jia</p>
              <p class="site-description motion-element" itemprop="description">Solving Problems by Coding</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">168</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">83</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/jijeng" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:jia1509309698@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          <script type="text/javascript" src="//rf.revolvermaps.com/0/0/5.js?i=5kk0u0mm50w&amp;m=0&amp;c=54ff00&amp;cr1=ff0000" async="async"></script>


        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#python2-和python3-的差异"><span class="nav-number">1.</span> <span class="nav-text">python2 和python3 的差异</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#python中-的使用"><span class="nav-number">2.</span> <span class="nav-text">python中*的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#随机数"><span class="nav-number">3.</span> <span class="nav-text">随机数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Random-with-Python"><span class="nav-number">3.1.</span> <span class="nav-text">Random with Python</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Random-Numbers-with-Numpy"><span class="nav-number">3.2.</span> <span class="nav-text">Random Numbers with Numpy</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#python-中的import-函数"><span class="nav-number">4.</span> <span class="nav-text">python 中的import 函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python多线程和多进程"><span class="nav-number">5.</span> <span class="nav-text">Python多线程和多进程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#python中-pickle-模块"><span class="nav-number">5.1.</span> <span class="nav-text">python中 pickle 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#easydict"><span class="nav-number">5.2.</span> <span class="nav-text">easydict</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#python中的文件遍历"><span class="nav-number">5.3.</span> <span class="nav-text">python中的文件遍历</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#switch-在python-中的实现"><span class="nav-number">5.4.</span> <span class="nav-text">switch 在python 中的实现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#python-中的with-statement"><span class="nav-number">6.</span> <span class="nav-text">python 中的with statement</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#python-和numpy-中关于类型函数"><span class="nav-number">6.1.</span> <span class="nav-text">python 和numpy 中关于类型函数</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jijeng Jia</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>

<div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
Total  <span id="busuanzi_value_site_pv"></span> views
You got  <span id="busuanzi_value_site_uv"></span> visitors
</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://https-jijeng-github-io.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://yoursite.com/2019/11/04/python-learning3/';
          this.page.identifier = '2019/11/04/python-learning3/';
          this.page.title = 'Python 学习笔记3';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://https-jijeng-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  















  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('10');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
